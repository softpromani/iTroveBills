import{T as N,p as v,o as s,c as u,b as e,a as V,w as B,q as S,F as m,x as h,t as c,f as R}from"./app-16fe332c.js";import{_ as W}from"./_plugin-vue_export-helper-c27b6911.js";const D={key:0},O={class:"-mt-4 rounded-lg shadow table-responsive"},q={class:"table table-bordered"},A=["onInput"],$=["onClick"],H=["onClick"],K={class:"font-bold"},L={class:"font-bold"},P={__name:"Editable",setup(Q){const C=N({}),n=v([["","","","","",""]]),b=v([]),p=v(!0),k=()=>{p.value=!p.value},x=(l,t,a)=>{let o=a.target.innerText;[2,4,5].includes(t)&&(o=parseFloat(o),isNaN(o)&&(o=0)),n.value[l][t]=o},F=l=>{const t=window.getSelection();if(!t.rangeCount)return;const a=t.getRangeAt(0);l.target.dataset.cursorStart=a.startOffset},T=l=>{const t=["","","","","",""];n.value.splice(l+1,0,t)},w=l=>{n.value.length>1&&n.value.splice(l,1)},f=l=>{const t=parseFloat(n.value[l][2])||0,a=parseFloat(n.value[l][5])||0;return(t*a).toFixed(2)},g=()=>n.value.reduce((l,t,a)=>l+parseFloat(f(a)),0).toFixed(2),_=()=>n.value.reduce((l,t)=>l+(parseFloat(t[4])||0),0).toFixed(2),E=()=>{var r,d,i,y;const l=((r=document.getElementById("invoice_no"))==null?void 0:r.value)||"",t=((d=document.getElementById("customer"))==null?void 0:d.value)||"",a=((i=document.getElementById("company"))==null?void 0:i.value)||"",o=((y=document.getElementById("vehical_no"))==null?void 0:y.value)||"";b.value[0]={invoice:l,customer:t,company:a,vehical_no:o,totalWeight:_(),totalTaxableValue:g()},C.post(route("performa.customer.store.bill",{invoicedata:n.value,invoicedetails:b.value}),{preserveScroll:!0})};return(l,t)=>(s(),u(m,null,[e("div",{class:"mt-5 bg-purple-700 rounded-md position-relative"},[t[2]||(t[2]=e("h2",{class:"font-medium text-center text-white font-weight-bolder"}," INVOICE ",-1)),e("span",{class:"text-white cursor-pointer top-2 right-2 position-absolute",onClick:k},[...t[1]||(t[1]=[e("i",{class:"fa-solid fa-bullseye"},null,-1)])])]),V(S,{name:"slide-fade"},{default:B(()=>[p.value?(s(),u("div",D,[e("div",O,[e("table",q,[t[9]||(t[9]=e("thead",{class:"table-dark"},[e("tr",null,[e("th",null,"S.NO."),e("th",null,"Description of Product"),e("th",null,"HSN Code"),e("th",null,"Quantity"),e("th",null,"Unit"),e("th",null,"Weight"),e("th",null,"Rate"),e("th",null,"Taxable Value"),e("th",null,"Action")])],-1)),e("tbody",null,[(s(!0),u(m,null,h(n.value,(a,o)=>(s(),u("tr",{key:o},[e("td",null,c(o+1),1),(s(!0),u(m,null,h(a,(r,d)=>(s(),u("td",{key:d,contenteditable:"",onInput:i=>x(o,d,i),onKeydown:t[0]||(t[0]=i=>F(i))},null,40,A))),128)),e("td",null,c(f(o)),1),e("td",null,[o===n.value.length-1?(s(),u("span",{key:0,class:"cursor-pointer badge rounded-pill text-bg-primary",onClick:r=>T(o)},[...t[3]||(t[3]=[e("i",{class:"fa fa-plus","aria-hidden":"true"},null,-1)])],8,$)):(s(),u("span",{key:1,class:"cursor-pointer badge rounded-pill text-bg-danger",onClick:r=>w(o)},[...t[4]||(t[4]=[e("i",{class:"fa fa-minus","aria-hidden":"true"},null,-1)])],8,H))])]))),128)),e("tr",null,[t[5]||(t[5]=e("td",{colspan:"4"},null,-1)),t[6]||(t[6]=e("td",{class:"font-bold"},"Total Weight:",-1)),e("td",K,c(_()),1),t[7]||(t[7]=e("td",{class:"font-bold"},"Total:",-1)),e("td",L,c(g()),1),t[8]||(t[8]=e("td",null,null,-1))])])])]),e("button",{class:"text-white btn btn-info text-bold mt-3",onClick:E}," Submit ")])):R("",!0)]),_:1})],64))}},z=W(P,[["__scopeId","data-v-503666bf"]]);export{z as default};
