import{p as r,o as a,c as n,a as v,u as k,w as _,F as y,Z as N,b as e,x as B,t as o,n as A,i as E,d as C,e as V,h as p,z as H,k as g,f as M,y as P}from"./app-bbd8229e.js";import{_ as O}from"./AuthenticatedLayout-d1469f08.js";/* empty css                                              */import{S as x}from"./sweetalert2.esm.all-263d9c0b.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./FlashMessages-dae28200.js";const U={class:"bg-white rounded-lg shadow"},Z={class:"rounded-lg table-responsive"},j={class:"table",style:{"min-height":"200px"}},z={class:"dropdown"},D={class:"dropdown-menu"},F=["onClick"],K={key:0,class:"modal fade show",style:{display:"block"},"aria-modal":"true",role:"dialog"},R={class:"modal-dialog",role:"document"},q={class:"modal-content"},L={class:"modal-body"},$={class:"mb-3"},G=["id","value"],J=["for"],Q={class:"form-group mb-3"},W={class:"form-group mb-3"},X={class:"form-group mb-3"},Y={key:1,class:"modal-backdrop fade show"},ne={__name:"invoice_list",props:{invoices:Object},setup(T){const i=r(!1),d=r(""),u=r(""),m=r(""),c=r(""),h=r([]),f=()=>{i.value=!1,u.value="",d.value="",m.value="",c.value=""},S=s=>{i.value=!0,invoiceId.value=s,P.get("/api/fetch-payment-types").then(t=>{h.value=t.data}).catch(t=>{console.error("Error fetching types:",t)})},I=()=>{P.post("/api/pay-bill",{payment_method_id:u.value,reference_no:d.value,amount:m.value,remark:c.value,invoice_id:invoiceId.value}).then(s=>{console.log("Bill paid successfully:",s),s.data.status==1?x.fire({title:"Success!",text:s.data.message,icon:"success",confirmButtonText:"OK"}).then(()=>{setTimeout(()=>{location.reload()},5e3)}):x.fire({title:"Info!",text:s.data.message,icon:"warning",confirmButtonText:"OK"}).then(()=>{setTimeout(()=>{location.reload()},5e3)}),f()}).catch(s=>{console.error("Error paying bill:",s),x.fire({title:"Error!",text:"There was an error paying the bill.",icon:"error",confirmButtonText:"OK"})})};return(s,t)=>(a(),n(y,null,[v(k(N),{title:"Customer view"}),v(O,null,{default:_(()=>[t[16]||(t[16]=e("div",{class:"inline-flex w-full mb-4 overflow-hidden bg-white rounded-lg shadow-md"},[e("div",{class:"flex items-center justify-center w-12 bg-pink-800"},[e("svg",{class:"w-6 h-6 text-white fill-current",viewBox:"0 0 40 40",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M20 3.33331C10.8 3.33331 3.33337 10.8 3.33337 20C3.33337 29.2 10.8 36.6666 20 36.6666C29.2 36.6666 36.6667 29.2 36.6667 20C36.6667 10.8 29.2 3.33331 20 3.33331ZM21.6667 28.3333H18.3334V25H21.6667V28.3333ZM21.6667 21.6666H18.3334V11.6666H21.6667V21.6666Z"})])]),e("div",{class:"px-4 py-2 -mx-3"},[e("div",{class:"mx-3"},[e("span",{class:"font-semibold text-blue-500"},"My Invoice List")])])],-1)),e("div",U,[e("div",Z,[e("table",j,[t[7]||(t[7]=e("thead",{class:"table-dark"},[e("tr",null,[e("th",{class:"col-1"},"Sr.no."),e("th",{class:"col-1"},"Invoice Number"),e("th",{class:"col-1"},"Invoice Date"),e("th",{class:"col-1"},"Total Amount"),e("th",{class:"col-1"},"Paid Amount"),e("th",{class:"col-2"},"Payment Status"),e("th",{class:"col-1"},"Company"),e("th",{class:"col-1"},"Action")])],-1)),e("tbody",null,[(a(!0),n(y,null,B(T.invoices,(l,b)=>(a(),n("tr",{key:l.id},[e("td",null,o(b+1),1),e("td",null,o(l.invoice_number??""),1),e("td",null,o(l.invoice_date??""),1),e("td",null,o(l.total_ammount??""),1),e("td",null,o(l.payment.paid_amount??""),1),e("td",null,[e("span",{class:A(["px-3 py-1 mr-2 text-xs font-medium rounded-full",{"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300":l.payment.status==="due","bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":l.payment.status==="partial-paid","bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":l.payment.status==="paid"}])},o(l.payment.status),3)]),e("td",null,o(l.company.company_name??""),1),e("td",null,[e("div",z,[t[6]||(t[6]=e("span",{class:"p-2",style:{"font-size":"15px",cursor:"pointer"},"data-bs-toggle":"dropdown","aria-expanded":"false"},[e("i",{class:"fa fa-ellipsis-v"})],-1)),e("ul",D,[e("li",null,[v(k(E),{href:s.route("view.invoice"),method:"get",data:{invoice_id:l.id},class:"dropdown-item"},{default:_(()=>[...t[4]||(t[4]=[e("i",{class:"fa fa-print","aria-hidden":"true",style:{color:"rgb(241, 12, 12)"}},null,-1),C(" Print",-1)])]),_:2},1032,["href","data"])]),e("li",null,[e("a",{onClick:V(w=>S(l.id),["prevent"]),class:"dropdown-item",href:"#"},[...t[5]||(t[5]=[e("i",{class:"fa fa-inr","aria-hidden":"true",style:{color:"rgb(245, 180, 0)"}},null,-1),C(" Pay Bill ",-1)])],8,F)])])])])]))),128))])])]),t[8]||(t[8]=e("div",{class:"flex flex-col items-center px-1 py-1 bg-white border-t xs:flex-row xs:justify-between"},null,-1))]),i.value?(a(),n("div",K,[e("div",R,[e("div",q,[e("div",{class:"modal-header"},[t[10]||(t[10]=e("h5",{class:"modal-title"},"Pay Bill",-1)),e("button",{type:"button",class:"close",onClick:f},[...t[9]||(t[9]=[e("span",null,"Ã—",-1)])])]),e("div",L,[e("form",{onSubmit:V(I,["prevent"])},[e("fieldset",$,[t[11]||(t[11]=e("legend",{class:"col-form-label pt-0"},"Payment Method",-1)),(a(!0),n(y,null,B(h.value,(l,b)=>(a(),n("div",{key:b,class:"form-check form-check-inline"},[p(e("input",{class:"form-check-input",type:"radio",id:l.name,value:l.id,"onUpdate:modelValue":t[0]||(t[0]=w=>u.value=w)},null,8,G),[[H,u.value]]),e("label",{class:"form-check-label",for:l.name},o(l.name),9,J)]))),128))]),e("div",Q,[t[12]||(t[12]=e("label",{for:"reference_no"},"Reference Number",-1)),p(e("input",{type:"text",class:"form-control",id:"reference_no","onUpdate:modelValue":t[1]||(t[1]=l=>d.value=l),required:""},null,512),[[g,d.value]])]),e("div",W,[t[13]||(t[13]=e("label",{for:"reference_no"},"Amount",-1)),p(e("input",{type:"number",class:"form-control",id:"reference_no","onUpdate:modelValue":t[2]||(t[2]=l=>m.value=l),required:""},null,512),[[g,m.value]])]),e("div",X,[t[14]||(t[14]=e("label",{for:"remark"},"Remark (if any)",-1)),p(e("textarea",{class:"form-control",id:"remark","onUpdate:modelValue":t[3]||(t[3]=l=>c.value=l)},null,512),[[g,c.value]])]),e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary",onClick:f},"Close"),t[15]||(t[15]=e("button",{type:"submit",class:"btn btn-primary"},"Submit",-1))])],32)])])])])):M("",!0),i.value?(a(),n("div",Y)):M("",!0)]),_:1})],64))}};export{ne as default};
