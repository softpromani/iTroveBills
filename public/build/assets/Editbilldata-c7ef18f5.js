import{T as S,p as v,s as E,o as s,c as u,b as l,a as _,w as W,q,F as b,x as y,t as d,f as D}from"./app-16fe332c.js";const H={key:0},L={class:"-mt-4 rounded-lg shadow table-responsive"},M={class:"table table-bordered"},O=["data-row","data-cell","innerHTML","onBlur"],R=["onClick"],j={class:"font-bold"},A={class:"font-bold"},Q={__name:"Editbilldata",props:{invoiceitem:Object},setup(k){const T=S({}),c=k,o=v([]),m=v([]),p=v(!0);E(()=>{c.invoiceitem?o.value=c.invoiceitem.map(e=>[e.desc_product,e.hsn_code,e.quantity,e.unit,e.weight,e.rate]):o.value=[["","","","","",""]]});const C=(e,t,a)=>{let n=a.target.innerText.trim();[2,4,5].includes(t)&&(n=parseFloat(n)||0),o.value[e][t]=n},F=()=>{o.value.push(["","","","","",""])},V=e=>{o.value.splice(e,1)},x=e=>e+1,f=e=>{const t=parseFloat(o.value[e][2])||0,a=parseFloat(o.value[e][5])||0;return(t*a).toFixed(2)},g=()=>o.value.reduce((e,t,a)=>e+parseFloat(f(a)),0).toFixed(2),h=()=>o.value.reduce((e,t)=>e+(parseFloat(t[4])||0),0).toFixed(2),N=()=>{var a,n,r,i;const e=((a=document.getElementById("invoice_no"))==null?void 0:a.value)||"",t=((n=document.getElementById("vehical_no"))==null?void 0:n.value)||"";m.value[0]={invoice:e,vehical_no:t,totalWeight:h(),totalTaxableValue:g()},T.post(route("customer.bill.update",{invoicedata:o.value,invoice_id:(i=(r=c.invoiceitem)==null?void 0:r[0])==null?void 0:i.invoice_id,invoicedetails:m.value}),{preserveScroll:!0})},w=()=>{p.value=!p.value};return(e,t)=>(s(),u(b,null,[l("div",{class:"mt-5 bg-purple-700 rounded-md position-relative"},[t[1]||(t[1]=l("h2",{class:"font-medium text-center text-white font-weight-bolder"}," INVOICE ",-1)),l("span",{class:"text-white cursor-pointer top-2 right-2 position-absolute",onClick:w},[...t[0]||(t[0]=[l("i",{class:"fa-solid fa-bullseye"},null,-1)])])]),_(q,{name:"slide-fade"},{default:W(()=>[p.value?(s(),u("div",H,[l("div",L,[l("table",M,[t[11]||(t[11]=l("thead",{class:"table-dark"},[l("tr",null,[l("th",null,"S.NO."),l("th",null,"Description of Product"),l("th",null,"HSN Code"),l("th",null,"Quantity"),l("th",null,"Unit"),l("th",null,"Weight"),l("th",null,"Rate"),l("th",null,"Taxable Value"),l("th",null,"Action")])],-1)),l("tbody",null,[(s(!0),u(b,null,y(o.value,(a,n)=>(s(),u("tr",{key:n},[l("td",null,d(x(n)),1),(s(!0),u(b,null,y(a,(r,i)=>(s(),u("td",{key:i,contenteditable:"true","data-row":n,"data-cell":i,innerHTML:r,onBlur:B=>C(n,i,B)},null,40,O))),128)),l("td",null,d(f(n)),1),l("td",null,[n===o.value.length-1?(s(),u("span",{key:0,class:"cursor-pointer badge rounded-pill text-bg-primary",onClick:F},[...t[2]||(t[2]=[l("i",{class:"fa fa-plus","aria-hidden":"true"},null,-1)])])):(s(),u("span",{key:1,class:"cursor-pointer badge rounded-pill text-bg-danger",onClick:r=>V(n)},[...t[3]||(t[3]=[l("i",{class:"fa fa-minus","aria-hidden":"true"},null,-1)])],8,R))])]))),128)),l("tr",null,[t[4]||(t[4]=l("td",null,null,-1)),t[5]||(t[5]=l("td",null,null,-1)),t[6]||(t[6]=l("td",null,null,-1)),t[7]||(t[7]=l("td",null,null,-1)),t[8]||(t[8]=l("td",{class:"font-bold"},"Total Weight:",-1)),l("td",j,d(h()),1),t[9]||(t[9]=l("td",{class:"font-bold"},"Total:",-1)),l("td",A,d(g()),1),t[10]||(t[10]=l("td",null,null,-1))])])])]),l("button",{class:"text-white btn btn-info text-bold",onClick:N}," Submit ")])):D("",!0)]),_:1})],64))}};export{Q as default};
