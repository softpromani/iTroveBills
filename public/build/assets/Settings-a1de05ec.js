import{G as S,T as U,o as u,c as m,a as l,u as b,w as g,F as h,Z as C,b as t,d as v,x as I,t as p,e as P,n as w,f as x,i as T}from"./app-83963e4d.js";import{_ as B}from"./AuthenticatedLayout-690e0c0a.js";import{_ as d,a as o}from"./TextInput-4a54275b.js";import{_ as n}from"./InputError-bbd76057.js";import{_ as G}from"./PrimaryButton-f9973975.js";import{S as A}from"./sweetalert2.esm.all-263d9c0b.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./FlashMessages-3bba3d09.js";const M={class:"space-y-6"},N={class:"bg-white shadow-sm border border-gray-100 rounded-xl overflow-hidden"},L={class:"p-6"},X={class:"flex items-center mb-4"},$={class:"h-10 w-10 bg-purple-100 rounded-full flex items-center justify-center text-purple-700 font-bold mr-3"},j={class:"text-gray-900 font-bold text-base"},D={class:"text-xs text-gray-500"},E=["onSubmit"],W={key:0,class:"mt-1 text-xs text-red-500 font-medium"},y={class:"md:col-span-2 lg:col-span-3 flex justify-end"},z={key:0},F={key:1},R={key:0,class:"text-center py-12"},ee={__name:"Settings",props:{companies:Array,configs:Object},setup(c){const _=c,s=S({});_.companies.forEach(i=>{const a=_.configs[i.id]||{};s[i.id]=U({company_id:i.id,client_id:a.client_id||"",client_secret:a.client_secret||"",username:a.username||"",password:a.password||"",gstin:a.gstin||i.gstin||"",email:a.email||i.email||"",gst_base_url:a.gst_base_url||"https://apisandbox.whitebooks.in",ip_address:a.ip_address||"127.0.0.1"})});const V=i=>{if(!i)return!1;try{return new URL(i),!1}catch{return!0}},f=i=>i?["esse","iste","suscipit","faker","Lorem"].some(e=>i.toLowerCase().includes(e.toLowerCase())):!1,k=i=>{s[i].post(route("mastergst.settings.store"),{preserveScroll:!0,onSuccess:()=>{A.fire({icon:"success",title:"Settings Saved",text:"MasterGST configuration updated successfully.",toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3})}})};return(i,a)=>(u(),m(h,null,[l(b(C),{title:"E-Way Bill Settings"}),l(B,null,{default:g(()=>[t("div",M,[t("div",N,[a[3]||(a[3]=t("div",{class:"bg-gradient-to-r from-purple-800 to-pink-700 py-3 px-6"},[t("h4",{class:"text-white font-bold text-lg flex items-center"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]),v(" MasterGST API Credentials ")])],-1)),t("div",L,[a[2]||(a[2]=t("p",{class:"text-gray-600 text-sm mb-6"}," Configure your MasterGST GSP credentials to enable automated E-Way Bill generation directly from your invoices. ",-1)),(u(!0),m(h,null,I(c.companies,e=>(u(),m("div",{key:e.id,class:"mb-10 last:mb-0 border-b border-gray-100 last:border-0 pb-10 last:pb-0"},[t("div",X,[t("div",$,p(e.company_name.charAt(0)),1),t("div",null,[t("h5",j,p(e.company_name),1),t("p",D,"GSTIN: "+p(e.gstin),1)])]),t("form",{onSubmit:P(r=>k(e.id),["prevent"]),class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},[t("div",null,[l(d,{value:"Client ID"}),l(o,{type:"text",modelValue:s[e.id].client_id,"onUpdate:modelValue":r=>s[e.id].client_id=r,class:"mt-1 block w-full",placeholder:"MasterGST Client ID"},null,8,["modelValue","onUpdate:modelValue"]),l(n,{message:s[e.id].errors.client_id},null,8,["message"])]),t("div",null,[l(d,{value:"Client Secret"}),l(o,{type:"password",modelValue:s[e.id].client_secret,"onUpdate:modelValue":r=>s[e.id].client_secret=r,class:"mt-1 block w-full",placeholder:"••••••••••••"},null,8,["modelValue","onUpdate:modelValue"]),l(n,{message:s[e.id].errors.client_secret},null,8,["message"])]),t("div",null,[l(d,{value:"API Username"}),l(o,{type:"text",modelValue:s[e.id].username,"onUpdate:modelValue":r=>s[e.id].username=r,class:"mt-1 block w-full",placeholder:"Portal Username"},null,8,["modelValue","onUpdate:modelValue"]),l(n,{message:s[e.id].errors.username},null,8,["message"])]),t("div",null,[l(d,{value:"API Password"}),l(o,{type:"password",modelValue:s[e.id].password,"onUpdate:modelValue":r=>s[e.id].password=r,class:"mt-1 block w-full",placeholder:"••••••••"},null,8,["modelValue","onUpdate:modelValue"]),l(n,{message:s[e.id].errors.password},null,8,["message"])]),t("div",null,[l(d,{value:"Registered Email"}),l(o,{type:"email",modelValue:s[e.id].email,"onUpdate:modelValue":r=>s[e.id].email=r,class:"mt-1 block w-full",placeholder:"email@example.com"},null,8,["modelValue","onUpdate:modelValue"]),l(n,{message:s[e.id].errors.email},null,8,["message"])]),t("div",null,[l(d,{value:"GSTIN (for API)"}),l(o,{type:"text",modelValue:s[e.id].gstin,"onUpdate:modelValue":r=>s[e.id].gstin=r,class:"mt-1 block w-full",placeholder:"27XXXXX0000X1Z1"},null,8,["modelValue","onUpdate:modelValue"]),l(n,{message:s[e.id].errors.gstin},null,8,["message"])]),t("div",null,[l(d,{value:"Base URL"}),l(o,{type:"text",modelValue:s[e.id].gst_base_url,"onUpdate:modelValue":r=>s[e.id].gst_base_url=r,class:w(["mt-1 block w-full",{"border-red-500 text-red-600":V(s[e.id].gst_base_url)||f(s[e.id].gst_base_url)}]),placeholder:"https://apisandbox.whitebooks.in"},null,8,["modelValue","onUpdate:modelValue","class"]),f(s[e.id].gst_base_url)?(u(),m("p",W," ⚠️ Warning: This looks like placeholder/dummy data. ")):x("",!0),l(n,{message:s[e.id].errors.gst_base_url},null,8,["message"])]),t("div",null,[l(d,{value:"IP Address"}),l(o,{type:"text",modelValue:s[e.id].ip_address,"onUpdate:modelValue":r=>s[e.id].ip_address=r,class:"mt-1 block w-full",placeholder:"127.0.0.1"},null,8,["modelValue","onUpdate:modelValue"]),l(n,{message:s[e.id].errors.ip_address},null,8,["message"])]),t("div",y,[l(G,{class:w({"opacity-25":s[e.id].processing}),disabled:s[e.id].processing},{default:g(()=>[s[e.id].processing?(u(),m("span",z,"Saving...")):(u(),m("span",F,"Save Configuration"))]),_:2},1032,["class","disabled"])])],40,E)]))),128)),c.companies.length===0?(u(),m("div",R,[a[1]||(a[1]=t("p",{class:"text-gray-500"},"No firms found. Please create a firm first.",-1)),l(b(T),{href:i.route("company.index"),class:"text-purple-700 font-bold hover:underline mt-2 inline-block"},{default:g(()=>[...a[0]||(a[0]=[v("Create Firm",-1)])]),_:1},8,["href"])])):x("",!0)])])])]),_:1})],64))}};export{ee as default};
